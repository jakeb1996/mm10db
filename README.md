# mm10db

This repository contains the whole-genome CRISPR target detection method as implemented in Sunagawa et al., "Mammalian Reverse Genetics without Crossing Reveals Nr3a as a Short-Sleeper Gene", Cell Reports 14(3.662-677, 2016)

## Getting Started

### Dependencies & Requirements

- Python 2.7

- FASTA formatted chromosome files (obtainable via UCSC.

    - Place these files in a new directory  `mm10_input/chr_sequences`.

    - Concatenate all sequences into a single file named `all_sequences.txt`

    - Build Bowtie2 indexes for these
 
- refGene annotation data (obtainable via UCSC)

    - Place this file in the `mm10_input` directory and name the file `refGene.txt`

### Installing

1. Clone this repository

```bash
git clone https://github.com/bmds-lab/mm10db.git
```

2. Build the findMismatches_threads binary

```bash
cd <repo>
make pthread
```


### Usage

1. Prepare gene lists. This will generate file(s) in the `mm10_input` directory.

```bash
python prepareGeneListsWholeGenome.py 
```


2. Create list(s) of exons. Repeat for each list file generated in step 1.

```bash
python createListExons.py <listFile>
```

`<listFile>` is a file generated by `createListExons.py`. Use only the filename; strip the directory and file extension.

3. Prepare the exon sequences files. Repeat for each list file generated in step 1.

```bash
python prepareExonSequences.py <listFile>
```

`<listFile>` is a file generated by `createListExons.py`. Use only the filename; strip the directory and file extension.

4. Prepare list of off-target sites

```bash
python prepareListOfftargetSites.py
```

5. Run method

```bash
python target_identitification_viaC.py nb_threads_C=<int> nb_threads_Bowtie=<int> genes=<listFile>
```

Note: we set `nb_threads_C` to `128` and `nb_threads_Bowtie` to `8`

`<listFile>` is a file generated by `createListExons.py`. Use only the filename; strip the directory and file extension.


## Citing

If you use this software, please cite the paper. 

```
Sunagawa, G. A., Sumiyama, K., Ukai-Tadenuma, M., Perrin, D., Fujishima, H., Ukai, H., ... & Shimizu, Y. (2016). Mammalian reverse genetics without crossing reveals Nr3a as a short-sleeper gene. Cell reports, 14(3), 662-677.
```

## License

See `LICENSE`

